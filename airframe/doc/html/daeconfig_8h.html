<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- BEGIN NETSA-DOXYGEN HEADER -->
<head>
<title>Airframe Application Utilities</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- All pages must include the following stylesheets -->
<link rel="stylesheet" type="text/css" href="doxygen.css">
<link rel="stylesheet" type="text/css" href="tabs.css">
<link rel="stylesheet" type="text/css" href="tools.css">
</head>       
<!--#include virtual="/tools-page-header.shtml"-->

<body>
<div class="tool-header">
<div class="bigtext">Airframe Application Utilities</div>
libairframe 0.7.2 API documentation
</div>
<!-- END NETSA-DOXYGEN HEADER -->

<div class="page-content">   
<br />
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>daeconfig.h File Reference</h1>Airframe Daemon Configuration Support. <a href="#_details">More...</a>
<p>
<code>#include &lt;airframe/autoinc.h&gt;</code><br>
<code>#include &lt;<a class="el" href="airopt_8h-source.html">airframe/airopt.h</a>&gt;</code><br>

<p>
<a href="daeconfig_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0" doxytag="daeconfig.h::DAEC_ERROR_DOMAIN"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a0">DAEC_ERROR_DOMAIN</a>&nbsp;&nbsp;&nbsp;g_quark_from_string("airframeDaemonError")</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">GError domain for daeconfig errors. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a1">DAEC_ERROR_SETUP</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Daeconfig setup error.  <a href="#a1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a2">daec_setup</a> (GError **err)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set up daemon configuration.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a3">daec_add_option_group</a> (<a class="el" href="airopt_8h.html#a0">AirOptionCtx</a> *aoctx)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add an option group for daemon configuration to the given optoin context.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a4">daec_is_daemon</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return daemon mode state.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a5">daec_will_fork</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return future fork state.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a6">daec_did_fork</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return forked state.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">gboolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a7">daec_did_quit</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return quit flag state.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8" doxytag="daeconfig.h::daec_quit"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="daeconfig_8h.html#a8">daec_quit</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the quit flag. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Airframe Daemon Configuration Support. 
<p>
Supplies automatic daemonization and the command line option processing necessary to use it. Use this when your application can run as a daemon and you want to give your users control over whether it does via the command line.<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="daeconfig.h::DAEC_ERROR_SETUP"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define DAEC_ERROR_SETUP&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Daeconfig setup error. 
<p>
Signifies that daemonization failed due to an underlying operating system error.     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="daeconfig.h::daec_add_option_group"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_add_option_group           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="airopt_8h.html#a0">AirOptionCtx</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>aoctx</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add an option group for daemon configuration to the given optoin context. 
<p>
This option group defines two options: --daemon (-d) to become a daemon, and --foreground to run in daemon mode without forking.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>aoctx</em>&nbsp;</td><td>airframe option context </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if successful, FALSE otherwise </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="daeconfig.h::daec_did_fork"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_did_fork           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return forked state. 
<p>
Returns true if a prior call to <a class="el" href="daeconfig_8h.html#a2">daec_setup()</a> caused the application to fork to the background.<p>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if the daemon has forked, FALSE otherwise </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="daeconfig.h::daec_did_quit"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_did_quit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return quit flag state. 
<p>
Returns FALSE until <a class="el" href="daeconfig_8h.html#a8">daec_quit()</a> has been called, then returns TRUE. Provided as a convenience, so applications don't have to track their own quit flag.<p>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if <a class="el" href="daeconfig_8h.html#a8">daec_quit()</a> has been called. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="daeconfig.h::daec_is_daemon"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_is_daemon           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return daemon mode state. 
<p>
Returns true if --daemon was passed in on the command line, regardless of whether --foreground was also present. If an application's logic is different for daemon and non-daemon mode, the application should use this call to determine which mode to run in.<p>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if in daemon mode, FALSE otherwise. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="daeconfig.h::daec_setup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_setup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">GError **&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>err</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set up daemon configuration. 
<p>
Call this after parsing an options context including a GOptionGroup returned from daec_option_group(). This sets up internal state used by the other daeconfig calls and daemonizes the application, if necessary.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>err</em>&nbsp;</td><td>an error description </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE on success, FALSE otherwise </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="daeconfig.h::daec_will_fork"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">gboolean daec_will_fork           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return future fork state. 
<p>
Returns true if --daemon and not --foreground. Use this call to determine whether a call to <a class="el" href="daeconfig_8h.html#a2">daec_setup()</a> will cause the application for fork to the background. This is primarily designed for interoperation with logconfig, which must know whether daeconfig will fork without requiring said fork to occur before logging is set up.<p>
<dl compact><dt><b>Returns:</b></dt><dd>TRUE if subsequent call to <a class="el" href="daeconfig_8h.html#a2">daec_setup()</a> will fork, FALSE otherwise. </dd></dl>
    </td>
  </tr>
</table>
</div>

<!-- BEGIN NETSA-TOOLS FOOTER -->
<div class="page-footer">
<!-- INCLUDE THE FOOTER CONTENT -->

<div class="copyright">
This library is part of the 
<a href="http://tools.netsa.cert.org">NetSA Security Suite</a>,                                                      
developed by the <a href="http://www.cert.org">CERT</a>
<a href="http://www.cert.org/netsa">NetSA</a> group<br>
at the <a href="http://www.sei.cmu.edu">Software Engineering Institute</a>   
at <a href="http://www.cmu.edu">Carnegie Mellon University</a>.
<br>
<br>
&copy; 2006-2008 Carnegie Mellon University </div>
</div>
<!-- END NETSA-TOOLS FOOTER -->       

</body>
</html>   
